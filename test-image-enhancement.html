<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI K√©pjav√≠t√≥ Teszt</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .image-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .image-box {
            flex: 1;
            text-align: center;
        }
        .image-box img {
            max-width: 100%;
            max-height: 400px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .controls {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .controls button {
            margin: 5px;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        .btn-warning { background: #ffc107; color: black; }
        .btn-primary:hover { background: #0056b3; }
        .btn-success:hover { background: #1e7e34; }
        .btn-info:hover { background: #117a8b; }
        .btn-warning:hover { background: #d39e00; }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .result-info {
            margin: 10px 0;
            padding: 10px;
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }
        .file-input {
            margin: 10px 0;
            padding: 10px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            text-align: center;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ AI K√©pjav√≠t√≥ Teszt</h1>
        <p>Teszteld az AI k√©pjav√≠t√≥ funkci√≥kat k√ºl√∂nb√∂z≈ë be√°ll√≠t√°sokkal.</p>

        <div class="file-input">
            <input type="file" id="imageInput" accept="image/*" />
            <p>V√°lassz egy k√©pet a tesztel√©shez</p>
        </div>

        <div class="controls">
            <h3>Gyors jav√≠t√°sok:</h3>
            <button id="enhanceDocument" class="btn-success" disabled>
                üìÑ Dokumentum jav√≠t√°s
            </button>
            <button id="enhancePhoto" class="btn-info" disabled>
                üì∏ Fot√≥ jav√≠t√°s
            </button>
            
            <h3>Egyedi be√°ll√≠t√°sok:</h3>
            <label><input type="checkbox" id="autoStraighten" checked> üîÑ Kiegyenes√≠t√©s</label><br>
            <label><input type="checkbox" id="convertToGrayscale" checked> ‚ö´ Fekete-feh√©r</label><br>
            <label><input type="checkbox" id="enhanceContrast" checked> üîÜ Kontraszt</label><br>
            <label><input type="checkbox" id="adjustBrightness" checked> üí° F√©nyer≈ë</label><br>
            <label><input type="checkbox" id="sharpenText" checked> üìù √âles√≠t√©s</label><br>
            <label><input type="checkbox" id="removeNoise" checked> üßπ Zaj elt√°vol√≠t√°s</label><br>
            <label>üìä Min≈ës√©g: <input type="range" id="quality" min="0.5" max="1" step="0.05" value="0.9"> <span id="qualityValue">90%</span></label><br>
            
            <button id="customEnhance" class="btn-warning" disabled>
                ‚öôÔ∏è Egyedi jav√≠t√°s alkalmaz√°sa
            </button>
        </div>

        <div class="image-container">
            <div class="image-box">
                <h3>Eredeti k√©p</h3>
                <img id="originalImage" src="" alt="Eredeti k√©p" style="display: none;">
                <div id="originalPlaceholder">Nincs k√©p bet√∂ltve</div>
            </div>
            <div class="image-box">
                <h3>Jav√≠tott k√©p</h3>
                <img id="enhancedImage" src="" alt="Jav√≠tott k√©p" style="display: none;">
                <div id="enhancedPlaceholder">Jav√≠t√°s m√©g nem t√∂rt√©nt</div>
            </div>
        </div>

        <div id="resultInfo" class="result-info" style="display: none;">
            <h4>Jav√≠t√°s eredm√©nye:</h4>
            <div id="resultDetails"></div>
        </div>
    </div>

    <script type="module">
        // Mock image enhancement service for testing
        class MockImageEnhancementService {
            async enhanceImage(imageUrl, options = {}) {
                // Simulate processing time
                await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
                
                // Mock enhancement result
                const appliedEnhancements = [];
                if (options.autoStraighten) appliedEnhancements.push('Kiegyenes√≠t√©s');
                if (options.convertToGrayscale) appliedEnhancements.push('Fekete-feh√©r konverzi√≥');
                if (options.enhanceContrast) appliedEnhancements.push('Kontraszt fokoz√°s');
                if (options.adjustBrightness) appliedEnhancements.push('F√©nyer≈ë jav√≠t√°s');
                if (options.sharpenText) appliedEnhancements.push('Sz√∂veg √©les√≠t√©s');
                if (options.removeNoise) appliedEnhancements.push('Zaj elt√°vol√≠t√°s');
                
                // For demo, just return the same image with a filter applied via CSS
                return {
                    enhancedImageUrl: imageUrl,
                    appliedEnhancements,
                    processingTime: 1500 + Math.random() * 1000,
                    originalSize: { width: 800, height: 600 },
                    enhancedSize: { width: 800, height: 600 }
                };
            }

            async enhanceDocument(imageUrl) {
                return this.enhanceImage(imageUrl, {
                    autoStraighten: true,
                    enhanceContrast: true,
                    convertToGrayscale: true,
                    sharpenText: true,
                    removeNoise: true,
                    adjustBrightness: true,
                    quality: 0.95
                });
            }

            async enhancePhoto(imageUrl) {
                return this.enhanceImage(imageUrl, {
                    autoStraighten: true,
                    enhanceContrast: true,
                    convertToGrayscale: false,
                    sharpenText: false,
                    removeNoise: true,
                    adjustBrightness: true,
                    quality: 0.9
                });
            }
        }

        const enhancementService = new MockImageEnhancementService();
        let currentImageUrl = null;
        let isProcessing = false;

        // DOM elements
        const imageInput = document.getElementById('imageInput');
        const originalImage = document.getElementById('originalImage');
        const enhancedImage = document.getElementById('enhancedImage');
        const originalPlaceholder = document.getElementById('originalPlaceholder');
        const enhancedPlaceholder = document.getElementById('enhancedPlaceholder');
        const resultInfo = document.getElementById('resultInfo');
        const resultDetails = document.getElementById('resultDetails');
        const qualitySlider = document.getElementById('quality');
        const qualityValue = document.getElementById('qualityValue');

        // Buttons
        const enhanceDocumentBtn = document.getElementById('enhanceDocument');
        const enhancePhotoBtn = document.getElementById('enhancePhoto');
        const customEnhanceBtn = document.getElementById('customEnhance');

        // Update quality display
        qualitySlider.addEventListener('input', (e) => {
            qualityValue.textContent = Math.round(e.target.value * 100) + '%';
        });

        // Image upload handler
        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    currentImageUrl = e.target.result;
                    originalImage.src = currentImageUrl;
                    originalImage.style.display = 'block';
                    originalPlaceholder.style.display = 'none';
                    
                    // Enable buttons
                    enhanceDocumentBtn.disabled = false;
                    enhancePhotoBtn.disabled = false;
                    customEnhanceBtn.disabled = false;
                    
                    // Reset enhanced image
                    enhancedImage.style.display = 'none';
                    enhancedPlaceholder.style.display = 'block';
                    enhancedPlaceholder.textContent = 'Jav√≠t√°s m√©g nem t√∂rt√©nt';
                    resultInfo.style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        // Enhancement functions
        async function performEnhancement(enhanceFunction, buttonElement) {
            if (isProcessing || !currentImageUrl) return;
            
            isProcessing = true;
            const originalText = buttonElement.textContent;
            buttonElement.innerHTML = '<span class="loading"></span> Feldolgoz√°s...';
            buttonElement.disabled = true;
            
            try {
                const result = await enhanceFunction(currentImageUrl);
                
                // Show enhanced image (with mock filter for demo)
                enhancedImage.src = result.enhancedImageUrl;
                enhancedImage.style.display = 'block';
                enhancedImage.style.filter = 'contrast(1.2) brightness(1.1) grayscale(0.8)';
                enhancedPlaceholder.style.display = 'none';
                
                // Show result info
                resultDetails.innerHTML = `
                    <strong>Alkalmazott jav√≠t√°sok:</strong><br>
                    ${result.appliedEnhancements.map(e => `‚Ä¢ ${e}`).join('<br>')}
                    <br><br>
                    <strong>Feldolgoz√°si id≈ë:</strong> ${Math.round(result.processingTime)}ms<br>
                    <strong>Eredeti m√©ret:</strong> ${result.originalSize.width}√ó${result.originalSize.height}<br>
                    <strong>Jav√≠tott m√©ret:</strong> ${result.enhancedSize.width}√ó${result.enhancedSize.height}
                `;
                resultInfo.style.display = 'block';
                
            } catch (error) {
                alert('Hiba a k√©pjav√≠t√°s sor√°n: ' + error.message);
            } finally {
                isProcessing = false;
                buttonElement.textContent = originalText;
                buttonElement.disabled = false;
            }
        }

        // Button event listeners
        enhanceDocumentBtn.addEventListener('click', () => {
            performEnhancement(enhancementService.enhanceDocument.bind(enhancementService), enhanceDocumentBtn);
        });

        enhancePhotoBtn.addEventListener('click', () => {
            performEnhancement(enhancementService.enhancePhoto.bind(enhancementService), enhancePhotoBtn);
        });

        customEnhanceBtn.addEventListener('click', () => {
            const options = {
                autoStraighten: document.getElementById('autoStraighten').checked,
                convertToGrayscale: document.getElementById('convertToGrayscale').checked,
                enhanceContrast: document.getElementById('enhanceContrast').checked,
                adjustBrightness: document.getElementById('adjustBrightness').checked,
                sharpenText: document.getElementById('sharpenText').checked,
                removeNoise: document.getElementById('removeNoise').checked,
                quality: parseFloat(document.getElementById('quality').value)
            };
            
            performEnhancement((url) => enhancementService.enhanceImage(url, options), customEnhanceBtn);
        });

        console.log('ü§ñ AI K√©pjav√≠t√≥ teszt bet√∂ltve!');
        console.log('V√°lassz egy k√©pet √©s pr√≥b√°ld ki a k√ºl√∂nb√∂z≈ë jav√≠t√°si opci√≥kat.');
    </script>
</body>
</html>